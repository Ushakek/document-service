# Report Service  
Этот сервис предназначен для автозаполнения шаблонов, с возможностью конвертации в PDF
## Требования
Перечисление требуемых пакетов в файлах [requirements.txt](requirements.txt)  
## Использование
Для того, что бы успешно использовать данный сервис локально:  
- Установить зависимости
- Запустить локальный сервер командой `uvicorn app.main:app --reload`
- Перейти по ссылке `http://localhost:8000/docs` где будет доступен web-интерфейс  
- Или использование с библиотекой `requests`

### Описание web-интерфейса
- Поле `values` является строкой, которая принимает значения в виде словаря (ключ-значение). 
    - Пример: `{'first key': 'first value', 'second key': 'second value'}`
- Поле `convert_to`, раскрывающийся список значений. где по умолчанию установлена подстановка без конвертирования в PDF
    >`Предупреждение`: Конвертация в формат PDF возможна только, если шаблон в формате HTML.
- Поле `template` -- это поле для загрузки шаблона, в который будет происходить подстановка значений из `values`. Должен содержать `{<ключ>}`, для успешной подстановки, где `<ключ>`, совпадает с ключами передаваемого словаря `values`.
    > Пример текста в шаблоне: "В данный текст мы передаём первое значение {first key} и второе значение {second key}"   
    Результат: "В данный текст мы передаём первое значение first value и второе значение second value  

### Использование с библиотекой `requests`
- Параметр `url`: передаём `http://localhost:8000/create_report`
- Параметр `params`: 
    - `convert_to` - значение по умолчанию формат шаблона. Доступное значение: `pdf` -- конвертирование в формат PDF
    - `values` - значения в виде строки, которая содержит вс себе словарь
    - Передаётся, как словарь, например `params={'convert_to': 'pdf', 'values': '{'first key': 'first value'}'}`
    > Правила, относительно конвертирования в PDF такие же, как и для web-интерфейса: Конвертация в PDF возможна только, если шаблон является HTML.  
    `ВАЖНО`: В качестве `values`, обязательно должна быть передана строка словарей, а не сам словарь, потому что это параметр: `'{'first key': 'first value'}'`
- Параметр `files`:
    - Принимает шаблон в любом формате
    - Должен быть в виде коллекции (`tuple`), где:
        - Первый параметр -- то, куда мы передаём значение (`template`), второй параметр, сам файл.
    > Пример использования: `files=('template', open(<путь к файлу>, 'r')`
